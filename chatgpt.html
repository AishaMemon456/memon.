<!DOCTYPE html>
<html>
<head>
    <title>First Class Html</title>
    <link rel='icon' type='image/png' href='simple-twitter-16x16-icon-png-7.png' />
    <link rel='stylesheet' href='style.css' />
    <style>
        .discount-price {
            text-decoration: line-through;
            color: red;
        }
        .actual-price {
            color: green;
        }
        .paymentLabel {
            display: flex;
            align-items: center;
        }
    </style>
</head>
<body>
    <div id='header' class='slideDown'>
        <h1>Header</h1>
    </div>
    <div id='container'>
        <div id='sidebar'>
            <h1>Sidebar</h1>
        </div>
        <div id='mainBox' style='display: flex; width: 100%; gap:10px'>
            <div class='grid-item slideDown' style='width: 30%;'>
                <form id='taskForm' onsubmit='event.preventDefault();' style='display: flex; flex-direction:column; gap: 4px; '>
                    <label>Checkout Form</label>
                    <input type='text' name='first_name' required id='first_name' placeholder="Enter your first name"/>
                    <span style='color:red;' hidden id='taskErrorField-first_name'>This field is required</span>
                    <input type='text' name='last_name' required id='last_name' placeholder="Enter your last name"/>
                    <span style='color:red;' hidden id='taskErrorField-last_name'>This field is required</span>
                    <input type='tel' name='number' required id='number' placeholder="Enter your phone number"/>
                    <span style='color:red;' hidden id='taskErrorField-number'>This field is required</span>
                    <textarea id="address" name="address" placeholder="Enter your full address"></textarea>
                    <span style='color:red;' hidden id='taskErrorField-address'>This field is required</span>
                    <input type='email' name='email' required id='email' placeholder="Enter your email"/>
                    <span style='color:red;' hidden id='taskErrorField-email'>This field is required</span>
                    <input type='text' name='postal_code' required id='postal_code' placeholder="Enter your postal code"/>
                    <span style='color:red;' hidden id='taskErrorField-postal_code'>This field is required</span>
                    <select id="city" name="city">
                        <option value="">Select City</option>
                        <option>Karachi</option>
                        <option>Lahore</option>
                        <option>Islamabad</option>
                        <option>Peshawar</option>
                        <option>Quetta</option>
                    </select>
                    <span style='color:red;' hidden id='taskErrorField-city'>This field is required</span>
                    <select id="country" name="country">
                        <option value="">Select Country</option>
                        <option selected>Pakistan</option>
                    </select>
                    <span style='color:red;' hidden id='taskErrorField-country'>This field is required</span>
                    <div>
                        <label class="paymentLabel">
                            <input type='radio' name='payment_method' required id='payment_method_cash' />
                            Cash on Delivery
                        </label>
                        <label class="paymentLabel">
                            <input type='radio' name='payment_method' required id='payment_method_online' />
                            Online Payment
                        </label>
                    </div>
                    <button type='button' onclick="submitCheckout()" id='submitBtn' class='submitBtn' style='background-color: blue; color: white; padding: 10px; border: none; border-radius: 5px;'>Checkout</button>
                </form>
                <div>
                    <label>Cart Details</label>
                    <div id="boxList" style="width: 80%; display: flex; flex-direction: column; gap: 4px;" class="grid-item slideDown">
                    </div>
                </div>
            </div>
            <div id='main'>
                <div id="total" class="total" style="display: flex;color: cornflowerblue; padding: 40%;"></div>
            </div>
        </div>
    </div>
    <script>
        // Your JavaScript code here...

        function submitCheckout() {
            debugger;
            const checkForm = validateFields();
            if(checkForm) {
                alert("Thank you for shopping with us");
                checkoutForm = initialCheckoutForm;
                document.getElementById('taskForm').reset();
                renderCarts();
            }
        }

        function validateFields() {
            var basicFields = [
                'first_name',
                'last_name',
                'address',
                'postal_code'
            ];

            const basicValidation = () => {
                var checkValidation = true;
                basicFields.forEach((x) => {
                    if(document.getElementById(x).value === '') {
                        checkValidation = false;
                        document.getElementById('taskErrorField-' + x).hidden = false;
                    } else {
                        document.getElementById('taskErrorField-' + x).hidden = true;
                    }
                });
                return checkValidation;
            }

            var testBasicValidation = basicValidation();
            if(!testBasicValidation) {
                return false;
            }

            const validatePhoneNumber = (phoneNumber) => {
                const regex = /^(\+92|92|033|03)[ -]*\d{3}[ -]*\d{7}$/;
                return regex.test(phoneNumber);
            }

            if (!validatePhoneNumber(document.getElementById('number').value)) {
                document.getElementById('taskErrorField-number').hidden = false;
                return false;
            } else {
                document.getElementById('taskErrorField-number').hidden = true;
            }

            const validateEmail = (email) => {
                const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                return regex.test(email);
            }

            if(!validateEmail(document.getElementById('email').value)) {
                document.getElementById('taskErrorField-email').hidden = false;
                return false;
            } else {
                document.getElementById('taskErrorField-email').hidden = true;
            }

            if(checkoutForm.cart_details.length === 0) {
                alert("Please add items to your cart first");
                return false;
            }

            return true;
        }
    </script>
</body>
</html>
